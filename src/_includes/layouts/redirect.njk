<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting according to language</title>
  </head>
  <body>
    <script>
      /*
        for future reference
        var availableLanguages = ["en", "el", "se"]; */
      var availableLanguages = ["en"];
      var locale = [
        ...(window.navigator.languages || []),
        window.navigator.language,
        window.navigator.browserLanguage,
        window.navigator.userLanguage,
        window.navigator.systemLanguage
      ]
        .filter(Boolean)
        .map(language => language.substr(0, 2))
        .find(language => availableLanguages.includes(language)) || "{{ site.defaultLang }}";
      let redirUrl = "{{ '/' | url }}" + locale + "/";
      console.log("Redirecting to :" + redirUrl);
      window.location.replace(redirUrl);
    </script>
  </body>
</html>
